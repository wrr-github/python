# 第一部分 概论

## 第1章 导论

## 第2章 操作系统结构

### 一、操作系统提供的服务和功能

#### 1、用户服务

1. 用户界面

   - 命令行界面

   - 批处理界面

   - 图形用户界面

2. 程序执行

   - 系统加载程序到内存并运行程序

   - 程序应能结束运行，包括正常或不正常

3. I/O操作

4. 文件系统操作

5. 通信

   - 共享内存：两个或多个进程读写共享内存区域

   - 消息交换：符合预先定义格式的信息分组可以通过操作系统在进程之间移动

6. 错误检测

#### 2、操作系统服务

	1. 资源分配：多个用户或多个作业同时运行时的资源分配
 2. 记账：统计用户使用资源的类型和数量
 3. 保护与安全

### 二、向操作系统传递参数的方法

1. 直接通过寄存器传递
2. 参数存在内存的块或表中，块或表的地址通过寄存器来传递
3. 通过程序放在或压入(push)到堆栈(stack)，并通过操作系统弹出(pop)

### 三、系统调用

#### 1、进程控制

#### 2、文件管理

- 创建create()
- 删除delete()
- 打开open()
- 读read()
- 写write()
- 重定位reposition()
- 关闭close()

#### 3、设备管理

- 请求request()

- 释放release()

  请求设备后的操作类似于文件，实现一组系统调用同时用于文件和设备

  缺点：多设备间系统调用容易发生死锁

#### 4、信息维护

#### 5、通信

- 消息传递模型：可用于少量数据交换，更容易实现
- 共享内存模型
  - 优点：高速便捷
  - 缺点：保护和同步方面有问题

#### 6、保护

### 四、策略与机制

机制决定如何做，策略决定做什么，机制与策略的分离可增加灵活性

### 五、操作系统的结构

#### 1、简单结构

缺乏明确定义的结构。

#### 2、分层方法

操作系统分成若干层，最低层为硬件，最高层为用户接口，要求每层只能调用更底层的功能和服务。

- 优点：简化了构造和调试
- 难点：如何合理定义分层
- 缺点：效率较低，每层都为系统调用增加额外开销

#### 3、微内核

从内核中删除所有不必要的部件，而将他们当作系统级与用户级的程序来实现。

- 功能：为客户端程序和运行在用户空间中的各种服务提供通信，通信是通过消息传递来提供的。

- 优点：便于扩展操作系统，提供了更好的安全性和可靠性
- 缺点：系统功能开销大，微内核性能受损

#### 4、模块

可加载内核模块：内核提供核心服务，而其他服务可在内核运行时以模块形式调用。

- 优点：效率更高，无需通过消息传递进行通信

#### 5、混合系统

组合不同结构，以便解决性能、安全性和可用性等问题。



