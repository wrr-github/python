# 一、time模块

## 1、获取时间戳

```python
time.time()  # 返回float类型的秒数
```

## 2、获取时间元组

```python
print(time.localtime(time.time()))
# time.struct_time(tm_year=2016, tm_mon=4, tm_mday=7, tm_hour=10, tm_min=3, tm_sec=27, tm_wday=3, tm_yday=98, tm_isdst=0)
```

struct_time元组的属性：

| 序号 | 属性     | 值                                   |
| ---- | -------- | ------------------------------------ |
| 0    | tm_year  | 2008                                 |
| 1    | tm_mon   | 1 到 12                              |
| 2    | tm_mday  | 1 到 31                              |
| 3    | tm_hour  | 0 到 23                              |
| 4    | tm_min   | 0 到 59                              |
| 5    | tm_sec   | 0 到 61 (60或61 是闰秒)              |
| 6    | tm_wday  | 0到6 (0是周一)                       |
| 7    | tm_yday  | 1 到 366(儒略历)                     |
| 8    | tm_isdst | -1, 0, 1, -1是决定是否为夏令时的旗帜 |

## 3、时间类型之间的相互转换

![img](https://img2018.cnblogs.com/blog/1392476/201903/1392476-20190321225857661-583237638.png)

```python
time.asctime([t])
'''
作用：将struct_time类型的时间转换为如下形式：'Sun Jun 20 23:21:05 1993'
参数：struct_time类型或tuple类型的时间，不填参数的话默认为time.localtime()得到的时间。
返回值：'Sun Jun 20 23:21:05 1993'类型的时间。
'''
```

```python
time.ctime([secs])
'''
作用：将时间戳的时间转换为表示本地时间的字符串。如果没有提供secs或没有提供secs，则使用time()返回的当前时间。
参数：时间戳类型的时间，如果不填默认为当前时间的时间戳。
返回值：格式化类型的时间，例如'Mon Mar 18 23:56:35 2019'。
'''
```

```python
time.gmtime([sec])
'''
作用：将时间戳类型的时间转换为UTC中的struct_time，其中dst标志始终为零。
参数：时间戳类型的时间，如果没有提供secs或没有提供secs，则使用time()返回的当前时间。
返回值：struct_time类型的时间
'''
```

```python
time.localtime([sec])
'''
作用：就像time.gmtime()，但是转换为本地时间。当dst应用于给定的时间时，dst标志被设置为1。
参数：时间戳类型的时间，如果没有提供secs或没有提供secs，则使用time()返回的当前时间。
返回值：struct_time类型的时间
'''
```

```python
time.mktime(t)
'''
作用：将struct_time类型的时间转换为时间戳类型。
参数：struct_time类型的时间。
返回值：时间戳类型。
'''
```

```python
time.strftime(format[,t])
'''
作用：将struct_time类型的时间转换为format参数指定格式的字符串。
参数：
	format:指定转换时间的字符串格式。
	t:struct_time类型的时间，如果不填默认为当前时间（即time.localtime()返回的时间）
返回值：指定格式的字符串。
'''
```

```python
time.strptime(string[,format])
'''
作用：根据格式解析表示时间的字符串。
参数：
	string:字符串类型的时间。
	format:提供字符串类型的时间的格式。
返回值：struct_time类型的时间。
'''
```

时间日期格式化符号：

- %y 两位数的年份表示（00-99）
- %Y 四位数的年份表示（000-9999）
- %m 月份（01-12）
- %d 月内中的一天（0-31）
- %H 24小时制小时数（0-23）
- %I 12小时制小时数（01-12）
- %M 分钟数（00-59）
- %S 秒（00-59）
- %a 本地简化星期名称
- %A 本地完整星期名称
- %b 本地简化的月份名称
- %B 本地完整的月份名称
- %c 本地相应的日期表示和时间表示
- %j 年内的一天（001-366）
- %p 本地A.M.或P.M.的等价符
- %U 一年中的星期数（00-53）星期天为星期的开始
- %w 星期（0-6），星期天为星期的开始
- %W 一年中的星期数（00-53）星期一为星期的开始
- %x 本地相应的日期表示
- %X 本地相应的时间表示
- %Z 当前时区的名称
- %% %号本身

# 二、datetime模块

## 1、datetime.date类

1. 对象方法和属性

```python
d = datetime.date.today()
d.year  # 年
d.month  # 月
d.day  #日
d.replace(year[, month[, day]])  # 生成并返回一个新的日期对象，原日期对象不变
d.timetuple()  # 返回日期对应的time.struct_time对象
d.toordinal()  # 返回日期是是自 0001-01-01 开始的第多少天
d.weekday()  # 返回日期是星期几，[0, 6]，0表示星期一
d.isoweekday()  # 返回日期是星期几，[1, 7], 1表示星期一
d.isocalendar()  # 返回一个元组，格式为：(year, weekday, isoweekday)
d.isoformat()  # 返回‘YYYY-MM-DD'格式的日期字符串
d.strftime(format)  # 返回指定格式的日期字符串，与time模块的strftime(format, struct_time)功能相同
```

2. 常量

```python
datetime.MINYEAR  # 所允许的最小年份，1
datetime.MAXYEAR  # 所允许的最大年份，9999
```

## 2、datetime.time类

1. 类方法和属性

   ```python
   time.max  # time类所能表示的最大时间：time(23, 59, 59, 999999)
   time.min  # time类所能表示的最小时间：time(0, 0, 0, 0)
   time.resolution  # 时间的最小单位，即两个不同时间的最小差值：1微秒
   ```

2. 对象方法和属性

```python
t = datetime.time(hour, [minute[, second, [microsecond[, tzinfo]]]])
'''
hour为必须参数，其他为可选参数。各参数的取值范围为：
  hour：[0, 23]
  minute：[0, 59]
  second：[0, 59]
  microsecond：[0, 1000000]
  tzinfo：tzinfo的子类对象，如timezone类的实例
'''
t.hour  # 时
t.minute  # 分
t.second  # 秒
t.microsecond  # 微秒
t.tzinfo  # 返回传递给time构造方法的tzinfo对象，如果该参数未给出，则返回None
t.replace(hour[, minute[, second[, microsecond[, tzinfo]]]])  # 生成并返回一个新的时间对象，原时间对象不变
t.isoformat()  # 返回一个‘HH:MM:SS.%f'格式的时间字符串
t.strftime()  # 返回指定格式的时间字符串，与time模块的strftime(format, struct_time)功能相同
```

## 3、datetime.datetime类

1. 类方法和属性

```python
datetime.today()  # 返回一个表示当前本期日期时间的datetime对象
datetime.now([tz])  # 返回指定时区日期时间的datetime对象，如果不指定tz参数则结果同上
datetime.utcnow()  # 返回当前utc日期时间的datetime对象
datetime.fromtimestamp(timestamp[, tz])  # 根据指定的时间戳创建一个datetime对象
datetime.utcfromtimestamp(timestamp)  # 根据指定的时间戳创建一个datetime对象
datetime.combine(date, time)  # 把指定的date和time对象整合成一个datetime对象
datetime.strptime(date_str, format)  # 将时间字符串转换为datetime对象
```

2. 对象方法和属性

```python
dt = datetime.datetime(year, month, day, hour=0, minute=0, second=0, microsecond=0, tzinfo=None)
'''
year, month 和 day是必须要传递的参数， tzinfo可以是None或tzinfo子类的实例。各参数的取值范围为：
  year：[MINYEAR, MAXYEAR]
  month：[1, 12]
  day：[1, 指定年份的月份中的天数]
  hour：[0, 23]
  minute：[0, 59]
  second：[0, 59]
  microsecond：[0, 1000000]
  tzinfo：tzinfo的子类对象，如timezone类的实例
'''
dt.year  # 年
dt.month  # 月
dt.day  # 日
dt.hour  # 时
dt.minute  # 分
dt.second  # 秒
dt.microsecond  # 微秒
dt.tzinfo  # 时区信息
dt.date()  # 获取datetime对象对应的date对象
dt.time()  # 获取datetime对象对应的time对象， tzinfo 为None
dt.timetz()  # 获取datetime对象对应的time对象，tzinfo与datetime对象的tzinfo相同
dt.replace([year[, month[, day[, hour[, minute[, second[, microsecond[, tzinfo]]]]]]]])  # 生成并返回一个新的datetime对象，如果所有参数都没有指定，则返回一个与原datetime对象相同的对象
dt.timetuple()  # 返回datetime对象对应的tuple（不包括tzinfo）
dt.utctimetuple()  # 返回datetime对象对应的utc时间的tuple（不包括tzinfo）
dt.toordinal()  # 同date对象
dt.weekday()  # 同date对象
dt.isocalendar()  # 同date对象
dt.isoformat([sep])  # 返回一个‘%Y-%m-%d
dt.ctime()  # 等价于time模块的time.ctime(time.mktime(d.timetuple()))
dt.strftime(format)  # 返回指定格式的时间字符串
dt.now()  # 返回当前时间的datetime对象
```

## 4、datetime.timedelta类

1. 类属性

```python
timedelta.min  # timedelta(-999999999)
timedelta.max  # timedelta(days=999999999, hours=23, minutes=59, seconds=59, microseconds=999999)
timedelta.resolution  # timedelta(microseconds=1)
```

2. 对象方法和属性

```python
td = datetime.timedelta(days=0, seconds=0, microseconds=0, milliseconds=0, hours=0, weeks=0)
'''
所有参数都是默认参数，因此都是可选参数。参数的值可以是整数或浮点数，也可以是正数或负数。内部值存储days、seconds 和 microseconds，其他所有参数都将被转换成这3个单位：
  1毫秒转换为1000微秒
  1分钟转换为60秒
  1小时转换为3600秒
  1周转换为7天
取值范围：
	microseconds：[0, 999999]
	seconds：[0, 86399]
	days：[-999999999, 999999999]
'''
td.days  # 天 [-999999999, 999999999]
td.seconds  # 秒 [0, 86399]
td.microseconds  # 微秒 [0, 999999]
td.total_seconds()  # 时间差中包含的总秒数，等价于: td / timedelta(seconds=1)
```

3. 方法和属性

```python
datetime.timedelta()  # 返回一个时间间隔对象，可以直接与datetime.datetime对象做加减操作
datetime.datetime.now() + datetime.timedelta(3)  # 3天后
datetime.datetime(2017, 2, 2, 9, 39, 40, 102821) + datetime.timedelta(hours=-3)  # 3小时前
```

